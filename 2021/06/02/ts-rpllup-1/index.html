<!DOCTYPE html>
<html lang>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Echo">



    <meta name="description" content="blog">



<title>TypeScript+Rollup快速构建JS-SDK | Echo的博客</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Echo&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Echo&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">TypeScript+Rollup快速构建JS-SDK</h1>
            
                <div class="post-meta">
                    
                        Author: Echo
                    

                    
                        <div class="post-time">
                        Date: June 2, 2021&nbsp;&nbsp;10:04:47
                        </div>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <p><meta name="referrer" content="no-referrer"></p>
<h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><p><strong><code>typescript-library-starter</code></strong><br>它是一个开源的 TypeScript 开发基础库的脚手架工具，可以帮助我们快速初始化一个 TypeScript 项目，这是它的<a href="https://github.com/alexjoverm/typescript-library-starter" target="_blank" rel="noopener">官网地址）</a>，有兴趣的同学可以了解下。</p>
<h2 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/alexjoverm/typescript-library-starter.git typeScript-sdk-demo</span><br><span class="line">cd typeScript-sdk-demo</span><br><span class="line"></span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<h2 id="文件目录介绍"><a href="#文件目录介绍" class="headerlink" title="文件目录介绍"></a>文件目录介绍</h2><hr>
<p>安装依赖结束后，打开项目工程目录，<strong><code>TypeScript library starter</code></strong> 生成的目录结构如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">├── CONTRIBUTING.md</span><br><span class="line">├── LICENSE </span><br><span class="line">├── README.md</span><br><span class="line">├── code-of-conduct.md</span><br><span class="line">├── node_modules</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── package.json</span><br><span class="line">├── rollup.config.ts    // rollup 配置文件</span><br><span class="line">├── src                 // 源码目录</span><br><span class="line">├── test                // 测试目录</span><br><span class="line">├── tools               // 发布到 GitHub pages 以及 发布到 npm 的一些配置脚本工具</span><br><span class="line">├── tsconfig.json       // TypeScript 编译配置文件</span><br><span class="line">└── tslint.json         // TypeScript lint 文件</span><br></pre></td></tr></table></figure></p>
<h2 id="工具集成"><a href="#工具集成" class="headerlink" title="工具集成"></a>工具集成</h2><hr>
<p>使用 <strong><code>TypeScript library starter</code></strong> 创建的项目集成了很多优秀的开源工具：</p>
<ul>
<li>使用 <code>RollupJS</code> 帮助我们打包。</li>
<li>使用 <code>Prettier</code> 和 <code>TSLint</code> 帮助我们格式化代码以及保证代码风格一致性。</li>
<li>使用 <code>TypeDoc</code> 帮助我们自动生成文档并部署到 GitHub pages。</li>
<li>使用 <code>Jest</code> 帮助我们做单元测试。</li>
<li>使用 <code>Commitizen</code> 帮助我们生成规范化的提交注释。</li>
<li>使用 <code>Semantic release</code> 帮助我们管理版本和发布。</li>
<li>使用 <code>husky</code> 帮助我们更简单地使用 git hooks。</li>
<li>使用 <code>Conventional changelog</code> 帮助我们通过代码提交信息自动生成 change log。</li>
</ul>
<h2 id="关联远程git仓库"><a href="#关联远程git仓库" class="headerlink" title="关联远程git仓库"></a>关联远程git仓库</h2><hr>
<p>当前创建好的代码库与 github 远程仓库是还未关联的，也就不能提交到远程仓库，如何关联呢？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin 仓库地址</span><br></pre></td></tr></table></figure></p>
<p>仓库地址 为之前新建的仓库，查看如下：<br><img src="https://upload-images.jianshu.io/upload_images/11846892-5c2d1b496fd344d8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1581842457980-a25385f2-300b-4ccb-b89e-96c074264c33.png"></p>
<p>接下来查看是否关联成功：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v</span><br></pre></td></tr></table></figure></p>
<h2 id="开发npm包"><a href="#开发npm包" class="headerlink" title="开发npm包"></a>开发npm包</h2><p>在我们的 src 目录下新建 index.ts 进行功能代码的编写，在此我们简单写一个 add 函数作为此次的发布的 npm 包所提供的功能。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// src/index.ts </span><br><span class="line">export default class TsSdk &#123;</span><br><span class="line">    /**</span><br><span class="line">   * return sum</span><br><span class="line">   * @static</span><br><span class="line">   * @param &#123;number&#125; a </span><br><span class="line">   *  @param &#123;number&#125; a </span><br><span class="line">   */</span><br><span class="line">  static add(a: number, b: number): number &#123;</span><br><span class="line">    return a+b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>但是在开发过程中往往需要开一个本地服务来测试我们的代码，也就是要写一个 demo，这时候就要用到 webpack 了。</p>
<h2 id="demo编写"><a href="#demo编写" class="headerlink" title="demo编写"></a>demo编写</h2><hr>
<p>我们会利用 Node.js 的 <code>express</code> 库去运行我们的 demo，利用 <code>webpack</code> 来作为 demo 的构建工具。</p>
<h3 id="依赖安装"><a href="#依赖安装" class="headerlink" title="依赖安装"></a>依赖安装</h3><p>我们先来安装一些编写 demo 需要的依赖包，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D webpack webpack-dev-middleware webpack-hot-middleware ts-loader  tslint-loader express</span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>webpack</code> 是打包构建工具</li>
<li><code>webpack-dev-middleware</code> 和 <code>webpack-hot-middleware</code> 是 2 个 express 的 webpack 中间件</li>
<li><code>ts-loader</code>和 <code>tslint-loader</code> 是 webpack 需要的 TypeScript 相关 loader</li>
<li><code>express</code> 是 Node.js 的服务端框架。<h3 id="编写-webpack-配置文件"><a href="#编写-webpack-配置文件" class="headerlink" title="编写 webpack 配置文件"></a>编写 webpack 配置文件</h3>根目录下创建 webpack 配置文件 <code>examples/webpack.config.js</code>：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&apos;fs&apos;)</span><br><span class="line">const path = require(&apos;path&apos;)</span><br><span class="line">const webpack = require(&apos;webpack&apos;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  mode: &apos;development&apos;,</span><br><span class="line">  /**</span><br><span class="line">   * 我们会在 examples 目录下建多个子目录</span><br><span class="line">   * 我们会把不同章节的 demo 放到不同的子目录中</span><br><span class="line">   * 每个子目录的下会创建一个 app.ts</span><br><span class="line">   * app.ts 作为 webpack 构建的入口文件</span><br><span class="line">   * entries 收集了多目录个入口文件，并且每个入口还引入了一个用于热更新的文件</span><br><span class="line">   * entries 是一个对象，key 为目录名</span><br><span class="line">   */</span><br><span class="line">  entry: fs.readdirSync(__dirname).reduce((entries, dir) =&gt; &#123;</span><br><span class="line">    const fullDir = path.join(__dirname, dir)</span><br><span class="line">    const entry = path.join(fullDir, &apos;app.ts&apos;)</span><br><span class="line">    if (fs.statSync(fullDir).isDirectory() &amp;&amp; fs.existsSync(entry)) &#123;</span><br><span class="line">      entries[dir] = [&apos;webpack-hot-middleware/client&apos;, entry]</span><br><span class="line">    &#125;</span><br><span class="line">    return entries</span><br><span class="line">  &#125;, &#123;&#125;),</span><br><span class="line">  /**</span><br><span class="line">   * 根据不同的目录名称，打包生成目标 js，名称和目录名一致</span><br><span class="line">   */</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.join(__dirname, &apos;__build__&apos;),</span><br><span class="line">    filename: &apos;[name].js&apos;,</span><br><span class="line">    publicPath: &apos;/__build__/&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.ts$/,</span><br><span class="line">        enforce: &apos;pre&apos;,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: &apos;tslint-loader&apos;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.tsx?$/,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: &apos;ts-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              transpileOnly: true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [&apos;.ts&apos;, &apos;.tsx&apos;, &apos;.js&apos;]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    new webpack.HotModuleReplacementPlugin(),</span><br><span class="line">    new webpack.NoEmitOnErrorsPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="编写-server-文件"><a href="#编写-server-文件" class="headerlink" title="编写 server 文件"></a>编写 server 文件</h3><p>在 examples 目录下创建 <code>server.js</code> 文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&apos;express&apos;)</span><br><span class="line">const webpack = require(&apos;webpack&apos;)</span><br><span class="line">const webpackDevMiddleware = require(&apos;webpack-dev-middleware&apos;)</span><br><span class="line">const webpackHotMiddleware = require(&apos;webpack-hot-middleware&apos;)</span><br><span class="line">const WebpackConfig = require(&apos;./webpack.config&apos;)</span><br><span class="line"></span><br><span class="line">const app = express()</span><br><span class="line">const compiler = webpack(WebpackConfig)</span><br><span class="line"></span><br><span class="line">app.use(webpackDevMiddleware(compiler, &#123;</span><br><span class="line">  publicPath: &apos;/__build__/&apos;,</span><br><span class="line">  stats: &#123;</span><br><span class="line">    colors: true,</span><br><span class="line">    chunks: false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">app.use(webpackHotMiddleware(compiler))</span><br><span class="line"></span><br><span class="line">app.use(express.static(__dirname))</span><br><span class="line"></span><br><span class="line">const port = process.env.PORT || 9090</span><br><span class="line">module.exports = app.listen(port, () =&gt; &#123;</span><br><span class="line">  console.log(`Server listening on http://localhost:$&#123;port&#125;, Ctrl+C to stop`)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="编写-demo-代码"><a href="#编写-demo-代码" class="headerlink" title="编写 demo 代码"></a>编写 demo 代码</h3><p>首先在 examples 目录下创建 index.html 和 global.css，作为所有 demo 的入口文件已全局样式文件。<br><code>index.html</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;typescript-npm-demo examples&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;/global.css&quot;&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body style=&quot;padding: 0 20px&quot;&gt;</span><br><span class="line">    &lt;h1&gt;typescript-npm-demo examples&lt;/h1&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;basic&quot;&gt;Basic&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p><code>global.css</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">html, body &#123;</span><br><span class="line">  font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;</span><br><span class="line">  color: #2c3e50;</span><br><span class="line">&#125;</span><br><span class="line">ul &#123;</span><br><span class="line">  line-height: 1.5em;</span><br><span class="line">  padding-left: 1.5em;</span><br><span class="line">&#125;</span><br><span class="line">a &#123;</span><br><span class="line">  color: #7f8c8d;</span><br><span class="line">  text-decoration: none;</span><br><span class="line">&#125;</span><br><span class="line">a:hover &#123;</span><br><span class="line">  color: #4fc08d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后在 examples 目录下创建 basic 目录，作为本章节的 demo 目录，在该目录下再创建 index.html 和 app.ts 文件</p>
<p><code>basic/index.html</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Basic example&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;p&gt;add result is equal to: &lt;i class=&quot;result&quot;&gt;&lt;/i&gt;&lt;/p&gt;</span><br><span class="line">    &lt;script src=&quot;/__build__/basic.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p><code>basic/app.ts</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import TsSdk from &apos;../../src/index.ts&apos;</span><br><span class="line"></span><br><span class="line">const addResult = TsSdk.add(1, 2)</span><br><span class="line">document.querySelector(&apos;.result&apos;).innerText = addResult</span><br></pre></td></tr></table></figure></p>
<h3 id="运行-demo"><a href="#运行-demo" class="headerlink" title="运行 demo"></a>运行 demo</h3><p>接着我们在 package.json 中去新增一个 npm script：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;dev&quot;: &quot;node examples/server.js&quot;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run dev</span><br></pre></td></tr></table></figure>
<p>相当于执行了 <code>node examples/server.js</code>，会开启我们的 server。<br>接着我们打开 chrome 浏览器，访问 <a href="http://localhost:9090/" target="_blank" rel="noopener">http://localhost:9090/</a> 即可访问我们的 demo 了<br><img src="https://upload-images.jianshu.io/upload_images/11846892-4b79b28c4198dcda.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="截屏2021-06-02 上午11.50.34.png"></p>
<h3 id="四、单元测试"><a href="#四、单元测试" class="headerlink" title="四、单元测试"></a>四、单元测试</h3><hr>
<h3 id="Jest-配置"><a href="#Jest-配置" class="headerlink" title="Jest 配置"></a>Jest 配置</h3><p>在 <code>package.json</code><br> 文件中有 jest 字段，对应 Jest 配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&quot;jest&quot;: &#123;</span><br><span class="line">  </span><br><span class="line">  // 将ts转换成js,因为实用ts编写测试代码</span><br><span class="line">  &quot;transform&quot;: &#123;</span><br><span class="line">    &quot;.(ts|tsx)&quot;: &quot;ts-jest&quot;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 测试环境，这里原来是 node ，我们可以改为 jsdom ，不然访问不到例如 window 对象。</span><br><span class="line">  // 表示它是一个类浏览器的测试环境，我们可以使用浏览器环境中的一些 API。</span><br><span class="line">  &quot;testEnvironment&quot;: &quot;jsdom&quot;,</span><br><span class="line"></span><br><span class="line">  // 要测试文件的正则表达式。</span><br><span class="line">  // 表示 test 目录下所有以 .test.ts 和 .spec.ts 的文件都需要跑测试。</span><br><span class="line">  &quot;testRegex&quot;: &quot;/test/.*\\.(test|spec)\\.(ts)$&quot;,</span><br><span class="line"></span><br><span class="line">  // 模块文件扩展名，当你去引入一个模块并没有指定扩展名的时候，它会依次尝试去添加这些扩展名去找你引入的模块文件。</span><br><span class="line">  // 表示优先找 .ts 的模块、然后是 .tsx，最后是 .js。</span><br><span class="line">  &quot;moduleFileExtensions&quot;: [</span><br><span class="line">    &quot;ts&quot;,</span><br><span class="line">    &quot;tsx&quot;,</span><br><span class="line">    &quot;js&quot;</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  // 测试覆盖率的阈值设定，当我们的测试覆盖率达不到阈值的时候，测试会失败。</span><br><span class="line">  // 表示全局的代码分支覆盖率要达到 90%，方法覆盖率要达到 95%，代码行数覆盖率达到 95%，声明覆盖率达到 95%。</span><br><span class="line">  &quot;coverageThreshold&quot;: &#123;</span><br><span class="line">    &quot;global&quot;: &#123;</span><br><span class="line">      &quot;branches&quot;: 90,</span><br><span class="line">      &quot;functions&quot;: 95,</span><br><span class="line">      &quot;lines&quot;: 95,</span><br><span class="line">      &quot;statements&quot;: 95</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 收集指定文件的测试覆盖率(即使你没为这些文件编写测试)，它的值为 glob patterns 类型。</span><br><span class="line">  // 表示收集 src 目录以及它的所有子目录中的 js 和 ts 文件的测试覆盖率。</span><br><span class="line">  &quot;collectCoverageFrom&quot;: [</span><br><span class="line">    &quot;src/*.&#123;js,ts&#125;&quot;,</span><br><span class="line">    &quot;src/**/*.&#123;js,ts&#125;&quot;</span><br><span class="line">  ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="编写单元测试"><a href="#编写单元测试" class="headerlink" title="编写单元测试"></a>编写单元测试</h2><p>在 test 目录下新建 index.spec.ts 测试文件，在下面输入我们的测试代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import TsSdk from &quot;../src/typescript-sdk&quot;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * TsSdk test</span><br><span class="line"> */</span><br><span class="line">describe(&apos;TsSdk test&apos;, () =&gt; &#123;</span><br><span class="line">    test(&apos;should return a number muti value&apos;, () =&gt; &#123;</span><br><span class="line">      const a = 1</span><br><span class="line">      const b = 3</span><br><span class="line">  </span><br><span class="line">      const result = TsSdk.add(a, b)</span><br><span class="line">  </span><br><span class="line">      expect(result).toBe(4)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure></p>
<p>执行 npm run test 查看我们的测试结果！<br><img src="https://upload-images.jianshu.io/upload_images/11846892-4a2a99faa3872ab1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="截屏2021-06-02 下午1.55.25.png"></p>
<p>由于我们的功能函数较简单，所以覆盖率很简单就达到了百分之百。</p>
<p>⚠️注意: 在自己编写过程中，不是语法层面错误时，测试失败是因为测试覆盖率的阈值设定，当我们的测试覆盖率达不到阈值的时候，测试会失败。可以根据自己需要将阈值调低，或者尽可能编写完善的单元测试。</p>
<h2 id="五、打包"><a href="#五、打包" class="headerlink" title="五、打包"></a>五、打包</h2><hr>
<p>我们会利用 <code>rollup</code> 来打包我们的 ts-sdk 库，它是一个非常著名的编译打包工具，相比 webpack，它非常适合去编译和打包一些 JS 库。</p>
<p>由于使用 <code>typescript-library-starter</code> 初始化我们的项目，我们已经拥有了 <code>rollup</code> 打包的相关配置和相关插件的安装，接下来我们就来对生成的 <code>rollup.config.ts</code> 做小小的梳理。</p>
<p><code>rollup.config.ts</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">import resolve from &apos;rollup-plugin-node-resolve&apos;</span><br><span class="line">import commonjs from &apos;rollup-plugin-commonjs&apos;</span><br><span class="line">import sourceMaps from &apos;rollup-plugin-sourcemaps&apos;</span><br><span class="line">import camelCase from &apos;lodash.camelcase&apos;</span><br><span class="line">import typescript from &apos;rollup-plugin-typescript2&apos;</span><br><span class="line">import json from &apos;rollup-plugin-json&apos;</span><br><span class="line"></span><br><span class="line">const pkg = require(&apos;./package.json&apos;)</span><br><span class="line"></span><br><span class="line">const libraryName = &apos;typescript-sdk&apos;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  // 表示打包入口文件。</span><br><span class="line">  input: `src/$&#123;libraryName&#125;.ts`,</span><br><span class="line"></span><br><span class="line">  // 表示输出的目标文件，它是一个对象数组，我们可以指定输出的格式，比如 umd 格式、es 模式等。</span><br><span class="line">  output: [</span><br><span class="line">    &#123; file: pkg.main, name: camelCase(libraryName), format: &apos;umd&apos;, sourcemap: true &#125;,</span><br><span class="line">    &#123; file: pkg.module, format: &apos;es&apos;, sourcemap: true &#125;,</span><br><span class="line">  ],</span><br><span class="line">  // Indicate here external modules you don&apos;t wanna include in your bundle (i.e.: &apos;lodash&apos;)</span><br><span class="line"> </span><br><span class="line">  // 声明它的外部依赖，可以不被打包进去。</span><br><span class="line">  external: [],</span><br><span class="line"></span><br><span class="line">  // 监听文件的变化，重新编译，只有在编译的时候开启 --watch 才生效。</span><br><span class="line">  watch: &#123;</span><br><span class="line">    include: &apos;src/**&apos;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 编译过程中使用的插件，其中 rollup-plugin-typescript2 就是用来编译 TypeScript 文件，useTsconfigDeclarationDir 表示使用 tsconfig.json 文件中定义的 declarationDir。</span><br><span class="line">  plugins: [</span><br><span class="line">    // Allow json resolution</span><br><span class="line">    json(),</span><br><span class="line">    // Compile TypeScript files</span><br><span class="line">    typescript(&#123; useTsconfigDeclarationDir: true &#125;),</span><br><span class="line">    // Allow bundling cjs modules (unlike webpack, rollup doesn&apos;t understand cjs)</span><br><span class="line">    commonjs(),</span><br><span class="line">    // Allow node_modules resolution, so you can use &apos;external&apos; to control</span><br><span class="line">    // which external modules to include in the bundle</span><br><span class="line">    // https://github.com/rollup/rollup-plugin-node-resolve#usage</span><br><span class="line">    resolve(),</span><br><span class="line"></span><br><span class="line">    // Resolve source maps to the original source</span><br><span class="line">    sourceMaps(),</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="修改-package-json"><a href="#修改-package-json" class="headerlink" title="修改 package.json"></a>修改 package.json</h4><p>如果已经在 <code>rollup.config.ts</code> 中修改了 libraryName 为 ***， 那么在 <code>package.json</code> 文件中你需要做相关的修改：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;main&quot;: &quot;dist/***.umd.js&quot;,</span><br><span class="line">  &quot;module&quot;: &quot;dist/***.es5.js&quot;,</span><br><span class="line">  &quot;typings&quot;: &quot;dist/types/***.d.ts&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>⚠️说明：在控制台执行 <code>npm run build</code>，会编译输出 dist 目录，其中 lib 目录是单个 .ts 文件编译后的 .js 文件。types 目录是所有 .ts 文件编译后生产的 .d.ts 声明文件。</p>
<p> <code>***.es5.js</code>是编译后生成的 es 模式的入口文件，用在 package.json 的 module 字段，<code>***.umd.js</code> 文件是编译后生成的 umd 模式的入口文件，用在 package.json 的 main 字段。</p>
<p><code>增加 2 个 npm scripts：</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;prepub&quot;: &quot;npm run test:prod &amp;&amp; npm run build&quot;,</span><br><span class="line">  &quot;pub&quot;: &quot;sh release.sh&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当我们运行 <code>npm run pub</code> 的时候，会优先执行 prepub 脚本，在 prepub 中我们运行了 test:prod 和 build 2 个脚本。&amp;&amp; 符号表示前面一个命令执行成功后才会执行后面的任务。</p>
<p><code>npm run test:prod</code> 实际上运行了 npm run lint &amp;&amp; npm run test – –no-cache。 先运行 lint 去校验我们的源码和测试文件是否遵循 tslint 规范，再运行 test 去跑测试。</p>
<p><code>npm run build</code> 实际上运行了 tsc –module commonjs、rollup -c rollup.config.ts 和 typedoc –out docs –target es6 –theme minimal –mode file src。先运行 tsc 去编译我们的 TypeScript 文件，dist/lib 和 dist/types 下的文件就是该命令产生的，然后运行 rollup 去构建 Add.umd.js 及 Add.es.js，最后运行 typedoc 去构建项目的文档。</p>
<p>运行完 prepub 后就会再运行 pub 命令，实际上执行了 sh release.sh 命令，但是目前我们没有这个脚本，接下来我们就需要来编写部署脚本 release.sh。</p>
<h3 id="编写部署脚本"><a href="#编写部署脚本" class="headerlink" title="编写部署脚本"></a>编写部署脚本</h3><p><code>release.sh：</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">// 部署脚本是 shell 脚本，shell 脚本就是封装了多行控制台命令，来逐行解释他们的含义。</span><br><span class="line"></span><br><span class="line">// 用来表示它是一个 shell 脚本。</span><br><span class="line">#!/usr/bin/env sh</span><br><span class="line"></span><br><span class="line">// 告诉脚本如果执行结果不为 true 则退出。</span><br><span class="line">set -e</span><br><span class="line"></span><br><span class="line">// 在控制台输出 Enter release version:。</span><br><span class="line">echo &quot;Enter release version: &quot;</span><br><span class="line"></span><br><span class="line">// 表示从标准输入读取值，并赋值给 $VERSION 变量。</span><br><span class="line">read VERSION</span><br><span class="line"></span><br><span class="line">// 其中 read -p 表示给出提示符</span><br><span class="line">// -n 1 表示限定最多可以有 1 个字符可以作为有效读入</span><br><span class="line">// -r 表示禁止反斜线的转义功能。因为我们的 read 并没有指定变量名，那么默认这个输入读取值会赋值给 $REPLY 变量。</span><br><span class="line">read -p &quot;Releasing $VERSION - are you sure? (y/n)&quot; -n 1 -r</span><br><span class="line"></span><br><span class="line">// echo 输出空值表示跳到一个新行，# 在 shell 脚本中表示注释。</span><br><span class="line">echo  # (optional) move to a new line</span><br><span class="line"></span><br><span class="line">// 表示 shell 脚本中的流程控制语句，判断 $REPLY 是不是大小写的 y，如果满足，则走到后面的 then 逻辑。</span><br><span class="line">if [[ $REPLY =~ ^[Yy]$ ]]</span><br><span class="line">then</span><br><span class="line"></span><br><span class="line">// 在控制台输出 Releasing $VERSION ...。</span><br><span class="line">  echo &quot;Releasing $VERSION ...&quot;</span><br><span class="line">  # commit</span><br><span class="line"></span><br><span class="line">// 表示把代码所有变化提交到暂存区。</span><br><span class="line">  git add -A</span><br><span class="line">  git commit -m &quot;[build] $VERSION&quot;</span><br><span class="line"></span><br><span class="line">// 修改 package.json 中的 version 字段到 $VERSION，并且提交一条修改记录，提交注释是 [release] $VERSION。</span><br><span class="line">  npm version $VERSION --message &quot;[release] $VERSION&quot;</span><br><span class="line">// 把代码发布到主干分支</span><br><span class="line">  git push origin master</span><br><span class="line"></span><br><span class="line">//是把仓库发布到 npm 上，我们会把 dist 目录下的代码都发布到 npm 上，因为我们在 package.json 中配置的是 files 是 [&quot;dist&quot;]。</span><br><span class="line">  # publish</span><br><span class="line">  npm publish</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p>
<h2 id="六、发布"><a href="#六、发布" class="headerlink" title="六、发布"></a>六、发布</h2><hr>
<p>发布之前，我们要对代码进行压缩，这样可以使打出的包更小。<br>安装 rollup-plugin-terser :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install rollup-plugin-terser -D</span><br></pre></td></tr></table></figure></p>
<p>修改<code>rollup.config.ts</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//....</span><br><span class="line">import &#123; terser &#125; from &quot;rollup-plugin-terser&quot;</span><br><span class="line">//.....</span><br><span class="line">export default &#123;</span><br><span class="line">  //....</span><br><span class="line">  plugins: [</span><br><span class="line">    //....</span><br><span class="line">    terser()</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="运行部署脚本"><a href="#运行部署脚本" class="headerlink" title="运行部署脚本"></a>运行部署脚本</h2><p>接下来我们就运行 npm run pub 脚本部署，按提示直接来，就可以发包了！<br>注意了，npm必须切换为初始源！</p>
<h3 id="扩展：错误处理"><a href="#扩展：错误处理" class="headerlink" title="扩展：错误处理"></a>扩展：错误处理</h3><ul>
<li>执行打包命令中的<code>tsc --module commonjs</code>命令，会报错<br><img src="https://upload-images.jianshu.io/upload_images/11846892-5d604d88915d1dd2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="截屏2021-06-03 上午9.49.25.png"></li>
</ul>
<p><strong><code>问题</code>❓</strong>：在<code>tsconfig.json</code>中已经设置 exclude node_modules了，tsc 还是执行到 node_modules 里面去了？<br><strong><code>原因❗️：</code></strong>exclude只是告诉Typescript这不是源代码，不要去转译和检查它。但是Typescript还是会去node_modules中查找第三方库的声明文件，这个行为也可以通过types或typesRoots选项配置。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/11846892-a89ba2703a9e9631.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="截屏2021-06-03 上午9.59.53.png"></p>
<p><strong><code>解决办法❗️：</code></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 注释</span><br><span class="line">&quot;typeRoots&quot;: [</span><br><span class="line">    //   &quot;node_modules/@types&quot;</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure></p>
<hr>
<p>总结：大功告成✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️✌️</p>
<p>参考链接:</p>
<ul>
<li><a href="https://www.yuque.com/u188805/ewtgo7/lmvqwh?language=en-us" target="_blank" rel="noopener">TypeScript+Rollup快速构建完整配置并发布npm包</a></li>
<li><a href="https://www.tslang.cn/docs/handbook/tsconfig-json.html" target="_blank" rel="noopener">tsconfig.json</a></li>
</ul>

        </div>

        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/npm/"># npm</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2021/06/09/skeleton/">实现骨架屏的方案</a>
            
            
            <a class="next" rel="next" href="/2021/05/31/Nginx-1/">前端需要掌握的Nginx知识点</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Echo | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
